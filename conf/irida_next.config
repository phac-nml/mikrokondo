/*
IRIDANext plugin configuration

*/


iridanext {
    enabled = true
    output {
        path = "${params.outdir}/iridanext.output.json.gz"
        overwrite = true
        validate = false
        files {
            idkey = "sample"
            global = [
                "**/SummaryReport/final_report.json",
                "**/SummaryReport/final_report.tsv"
            ]
            samples = [
                "**/assembly/length_filtered_contigs/*_filtered.fasta.gz",
                "**/assembly/quality/quast/*/*.pdf",
                "**/assembly/7GeneMLST/*.json",
                "**/assembly/taxon_determination/mash/*.taxa.screen",
                "**/subtyping/ectyper/*/output.tsv",
                "**/subtyping/sistr/*.json",
                "**/subtyping/lissero/*.tsv",
                "**/annotations/abricate/*.txt",
                "**/annotations/mobrecon/*/mobtyper_results.txt",
                "**/annotations/bakta/*.gbff",
                "**/annotations/bakta/*.txt",
                "**/StarAMR/*/summary.tsv",
                "**/StarAMR/*/detailed_summary.tsv",
                "**/StarAMR/*/results.xlsx",
                "**/locidex/Report/*.profile.mlst.json.gz",
                "**/SummaryReport/*_flat_sample.json.gz",
            ]
        }
        metadata {
            samples {
                flatten = true
                rename = [
                    "QCStatus"                                     : "QC Status",
                    "QualityAnalysis.checkm_contamination.message" : "Checkm Status",
                    "QualityAnalysis.checkm_contamination.status"  : "Checkm Value",
                    "QualityAnalysis.average_coverage.message"     : "Average Coverage Status",
                    "QualityAnalysis.average_coverage.status"      : "Average Coverage Value",
                    "QualityAnalysis.n50_value.message"            : "n50 Status",
                    "QualityAnalysis.n50_value.status"             : "n50 Value",
                    "QualityAnalysis.raw_average_quality.message"  : "Raw Average Quality Status",
                    "QualityAnalysis.raw_average_quality.status"   : "Raw Average Quality Value",
                    "QualityAnalysis.length.message"               : "Length Status",
                    "QualityAnalysis.length.status"                : "Length Value",
                    "QualityAnalysis.nr_contigs.message"           : "nr contigs Status",
                    "QualityAnalysis.nr_contigs.status"            : "nr contigs Value",
                    "QCSummary"                                    : "QC Summary",
                    "downsampled"                                  : "Downsampled",
                    "SpeciesTopHit"                                : "Species",
                    "ECTyperSubtyping.0.Database"                  : "ECTyper Database",
                    "ECTyperSubtyping.0.Evidence"                  : "ECTyper Evidence",
                    "ECTyperSubtyping.0.GeneCoverages(%)"          : "ECTyper GeneCoverages (%)",
                    "ECTyperSubtyping.0.GeneIdentities(%)"         : "ECTyper GeneIdentities (%)",
                    "ECTyperSubtyping.0.GeneScores"                : "ECTyper GeneScores",
                    "ECTyperSubtyping.0.H-type"                    : "ECTyper H-Antigen",
                    "ECTyperSubtyping.0.O-type"                    : "ECTyper O-Antigen",
                    "ECTyperSubtyping.0.QC"                        : "ECTyper QCFlag",
                    "ECTyperSubtyping.0.Serotype"                  : "ECTyper Serotype",
                    "ECTyperSubtyping.0.Species"                   : "ECTyper Subtyping",
                    "ECTyperSubtyping.0.Warnings"                  : "ECTyper Warnings",
                    "LISSEROSubtyping.0.SEROTYPE"                  : "LISSERO Serotype",
                    "QUAST.0.GC (%)"                               : "GC (%)",
                    "RawReadSummary.R1.mean_sequence_length"       : "Mean Sequence Length Forward",
                    "SISTRSubtyping.0.cgmlst_ST"                   : "SISTR cgMLST ST",
                    "SISTRSubtyping.0.cgmlst_found_loci"           : "SISTR cgMLST Found Loci",
                    "SISTRSubtyping.0.cgmlst_genome_match"         : "SISTR cgMLST Genome Match",
                    "SISTRSubtyping.0.cgmlst_matching_alleles"     : "SISTR cgMLST Matching Alleles",
                    "SISTRSubtyping.0.cgmlst_subspecies"           : "SISTR cgMLST Subspecies",
                    "SISTRSubtyping.0.h1"                          : "SISTR H1",
                    "SISTRSubtyping.0.h2"                          : "SISTR H2",
                    "SISTRSubtyping.0.o_antigen"                   : "SISTR Antigen",
                    "SISTRSubtyping.0.qc_messages"                 : "SISTR QC Message",
                    "SISTRSubtyping.0.qc_status"                   : "SISTR QC Status",
                    "SISTRSubtyping.0.serogroup"                   : "SISTR Serogroup",
                    "SISTRSubtyping.0.serovar"                     : "SISTR Serovar",
                    "SISTRSubtyping.0.serovar_antigen"             : "SISTR Serovar Antigen",
                    "SISTRSubtyping.0.serovar_cgmlst"              : "SISTR Serovar cgMLST",
                    "SeqtkBaseCount"                               : "BaseCount",
                    "SevenGeneMLSTReport.0.alleles.abcZ"           : "abcZ",
                    "SevenGeneMLSTReport.0.alleles.adk"            : "adk",
                    "SevenGeneMLSTReport.0.alleles.arcA"           : "arcA",
                    "SevenGeneMLSTReport.0.alleles.aroC"           : "aroC",
                    "SevenGeneMLSTReport.0.alleles.aspC"           : "aspC",
                    "SevenGeneMLSTReport.0.alleles.bglA"           : "bglA",
                    "SevenGeneMLSTReport.0.alleles.cat"            : "cat",
                    "SevenGeneMLSTReport.0.alleles.clpX"           : "clpX",
                    "SevenGeneMLSTReport.0.alleles.dapE"           : "dapE",
                    "SevenGeneMLSTReport.0.alleles.dat"            : "dat",
                    "SevenGeneMLSTReport.0.alleles.dnaG"           : "dnaG",
                    "SevenGeneMLSTReport.0.alleles.dnaN"           : "dnaN",
                    "SevenGeneMLSTReport.0.alleles.fadD"           : "fadD",
                    "SevenGeneMLSTReport.0.alleles.fumC"           : "fumC",
                    "SevenGeneMLSTReport.0.alleles.gyrB"           : "gyrB",
                    "SevenGeneMLSTReport.0.alleles.hemD"           : "hemD",
                    "SevenGeneMLSTReport.0.alleles.hisD"           : "hisD",
                    "SevenGeneMLSTReport.0.alleles.icd"            : "icd",
                    "SevenGeneMLSTReport.0.alleles.ldh"            : "ldh",
                    "SevenGeneMLSTReport.0.alleles.lhkA"           : "lhkA",
                    "SevenGeneMLSTReport.0.alleles.lysP"           : "lysP",
                    "SevenGeneMLSTReport.0.alleles.mdh"            : "mdh",
                    "SevenGeneMLSTReport.0.alleles.purA"           : "purA",
                    "SevenGeneMLSTReport.0.alleles.purE"           : "purE",
                    "SevenGeneMLSTReport.0.alleles.recA"           : "recA",
                    "SevenGeneMLSTReport.0.alleles.sucA"           : "sucA",
                    "SevenGeneMLSTReport.0.alleles.thrA"           : "thrA",
                    "SevenGeneMLSTReport.0.sequence_type"          : "7 Gene ST",
                    "SevenGeneMLSTReport.0.scheme"                 : "7 Gene Scheme",
                    "StarAMR.0.Genotype"                           : "StarAMR Genotype",
                    "StarAMR.0.Predicted Phenotype"                : "StarAMR Predicted Phenotype",
                    "StarAMR.0.Plasmid"                            : "StarAMR Plasmid"
                ]
                keep = [
                    "QCStatus",
                    "QualityAnalysis.checkm_contamination.message",
                    "QualityAnalysis.checkm_contamination.status",
                    "QualityAnalysis.average_coverage.message",
                    "QualityAnalysis.average_coverage.status",
                    "QualityAnalysis.n50_value.message",
                    "QualityAnalysis.n50_value.status",
                    "QualityAnalysis.raw_average_quality.message",
                    "QualityAnalysis.raw_average_quality.status",
                    "QualityAnalysis.length.message",
                    "QualityAnalysis.length.status",
                    "QualityAnalysis.nr_contigs.message",
                    "QualityAnalysis.nr_contigs.status",
                    "QCSummary",
                    "downsampled",
                    "SpeciesTopHit",
                    "ECTyperSubtyping.0.Database",
                    "ECTyperSubtyping.0.Evidence",
                    "ECTyperSubtyping.0.GeneCoverages(%)",
                    "ECTyperSubtyping.0.GeneIdentities(%)",
                    "ECTyperSubtyping.0.GeneScores",
                    "ECTyperSubtyping.0.H-type",
                    "ECTyperSubtyping.0.O-type",
                    "ECTyperSubtyping.0.QC",
                    "ECTyperSubtyping.0.Serotype",
                    "ECTyperSubtyping.0.Species",
                    "ECTyperSubtyping.0.Warnings",
                    "LISSEROSubtyping.0.SEROTYPE",
                    "QUAST.0.GC (%)",
                    "RawReadSummary.R1.mean_sequence_length",
                    "SISTRSubtyping.0.cgmlst_ST",
                    "SISTRSubtyping.0.cgmlst_found_loci",
                    "SISTRSubtyping.0.cgmlst_genome_match",
                    "SISTRSubtyping.0.cgmlst_matching_alleles",
                    "SISTRSubtyping.0.cgmlst_subspecies",
                    "SISTRSubtyping.0.h1",
                    "SISTRSubtyping.0.h2",
                    "SISTRSubtyping.0.o_antigen",
                    "SISTRSubtyping.0.qc_messages",
                    "SISTRSubtyping.0.qc_status",
                    "SISTRSubtyping.0.serogroup",
                    "SISTRSubtyping.0.serovar",
                    "SISTRSubtyping.0.serovar_antigen",
                    "SISTRSubtyping.0.serovar_cgmlst",
                    "SeqtkBaseCount",
                    "SevenGeneMLSTReport.0.alleles.abcZ",
                    "SevenGeneMLSTReport.0.alleles.adk",
                    "SevenGeneMLSTReport.0.alleles.arcA",
                    "SevenGeneMLSTReport.0.alleles.aroC",
                    "SevenGeneMLSTReport.0.alleles.aspC",
                    "SevenGeneMLSTReport.0.alleles.bglA",
                    "SevenGeneMLSTReport.0.alleles.cat",
                    "SevenGeneMLSTReport.0.alleles.clpX",
                    "SevenGeneMLSTReport.0.alleles.dapE",
                    "SevenGeneMLSTReport.0.alleles.dat",
                    "SevenGeneMLSTReport.0.alleles.dnaG",
                    "SevenGeneMLSTReport.0.alleles.dnaN",
                    "SevenGeneMLSTReport.0.alleles.fadD",
                    "SevenGeneMLSTReport.0.alleles.fumC",
                    "SevenGeneMLSTReport.0.alleles.gyrB",
                    "SevenGeneMLSTReport.0.alleles.hemD",
                    "SevenGeneMLSTReport.0.alleles.hisD",
                    "SevenGeneMLSTReport.0.alleles.icd",
                    "SevenGeneMLSTReport.0.alleles.ldh",
                    "SevenGeneMLSTReport.0.alleles.lhkA",
                    "SevenGeneMLSTReport.0.alleles.lysP",
                    "SevenGeneMLSTReport.0.alleles.mdh",
                    "SevenGeneMLSTReport.0.alleles.purA",
                    "SevenGeneMLSTReport.0.alleles.purE",
                    "SevenGeneMLSTReport.0.alleles.recA",
                    "SevenGeneMLSTReport.0.alleles.sucA",
                    "SevenGeneMLSTReport.0.alleles.thrA",
                    "SevenGeneMLSTReport.0.sequence_type",
                    "SevenGeneMLSTReport.0.scheme",
                    "StarAMR.0.Genotype",
                    "StarAMR.0.Predicted Phenotype",
                    "StarAMR.0.Plasmid"
                ]
                json {
                    path = "**/SummaryReport/final_report_flattened.json"
                }
            }
        }
    }
}
