/*
IRIDANext plugin configuration

*/


iridanext {
    enabled = true
    output {
        path = "${params.outdir}/iridanext.output.json.gz"
        overwrite = true
        validate = false
        files {
            idkey = "sample"
            global = [
                "**/SummaryReport/final_report.json",
                "**/SummaryReport/final_report.tsv"
            ]
            samples = [
                "**/assembly/length_filtered_contigs/*_filtered.fasta.gz",
                "**/assembly/quality/quast/*/*.pdf",
                "**/assembly/7GeneMLST/*.json",
                "**/assembly/taxon_determination/mash/*.taxa.screen",
                "**/subtyping/ectyper/*/output.tsv",
                "**/subtyping/sistr/*.json",
                "**/subtyping/lissero/*.tsv",
                "**/annotations/abricate/*.txt",
                "**/annotations/mobrecon/*/mobtyper_results.txt",
                "**/annotations/bakta/*.gbff",
                "**/annotations/bakta/*.txt",
                "**/StarAMR/*/summary.tsv",
                "**/StarAMR/*/detailed_summary.tsv",
                "**/StarAMR/*/results.xlsx",
                "**/locidex/Report/*.profile.mlst.json.gz",
                "**/SummaryReport/*_flat_sample.json.gz",
            ]
        }
        metadata {
            samples {
                flatten = true
                rename = [
                    "QCStatus"                                : "QC Status",
                    "QCSummary"                               : "QC Summary",
                    "downsampled"                             : "Downsampled",
                    "SpeciesTopHit"                           : "Species",
                    "ECTyperSubtyping.0.Database"             : "ECTyper Database",
                    "ECTyperSubtyping.0.Evidence"             : "ECTyper Evidence",
                    "ECTyperSubtyping.0.GeneCoverages(%)"     : "ECTyper GeneCoverages (%)",
                    "ECTyperSubtyping.0.GeneIdentities(%)"    : "ECTyper GeneIdentities (%)",
                    "ECTyperSubtyping.0.GeneScores"           : "ECTyper GeneScores",
                    "ECTyperSubtyping.0.H-type"               : "ECTyper H-Antigen",
                    "ECTyperSubtyping.0.O-type"               : "ECTyper O-Antigen",
                    "ECTyperSubtyping.0.QC"                   : "ECTyper QCFlag",
                    "ECTyperSubtyping.0.Serotype"             : "ECTyper Serotype",
                    "ECTyperSubtyping.0.Species"              : "ECTyper Subtyping",
                    "ECTyperSubtyping.0.Warnings"             : "ECTyper Warnings",
                    "LISSEROSubtyping.0.SEROTYPE"             : "LISSERO Serotype",
                    "QUAST.0.GC (%)"                          : "GC (%)",
                    "RawReadSummary.R1.mean_sequence_length"  : "Mean Sequence Length Forward",
                    "SISTRSubtyping.0.cgmlst_ST"              : "SISTR cgMLST ST",
                    "SISTRSubtyping.0.cgmlst_found_loci"      : "SISTR cgMLST Found Loci",
                    "SISTRSubtyping.0.cgmlst_genome_match"    : "SISTR cgMLST Genome Match",
                    "SISTRSubtyping.0.cgmlst_matching_alleles": "SISTR cgMLST Matching Alleles",
                    "SISTRSubtyping.0.cgmlst_subspecies"      : "SISTR cgMLST Subspecies",
                    "SISTRSubtyping.0.h1"                     : "SISTR H1",
                    "SISTRSubtyping.0.h2"                     : "SISTR H2",
                    "SISTRSubtyping.0.o_antigen"              : "SISTR Antigen",
                    "SISTRSubtyping.0.qc_messages"            : "SISTR QC Message",
                    "SISTRSubtyping.0.qc_status"              : "SISTR QC Status",
                    "SISTRSubtyping.0.serogroup"              : "SISTR Serogroup",
                    "SISTRSubtyping.0.serovar"                : "SISTR Serovar",
                    "SISTRSubtyping.0.serovar_antigen"        : "SISTR Serovar Antigen",
                    "SISTRSubtyping.0.serovar_cgmlst"         : "SISTR Serovar cgMLST",
                    "SeqtkBaseCount"                          : "BaseCount",
                    "SevenGeneMLSTReport.0.alleles.abcZ"      : "abcZ",
                    "SevenGeneMLSTReport.0.alleles.adk"       : "adk",
                    "SevenGeneMLSTReport.0.alleles.arcA"      : "arcA",
                    "SevenGeneMLSTReport.0.alleles.aroC"      : "aroC",
                    "SevenGeneMLSTReport.0.alleles.aspC"      : "aspC",
                    "SevenGeneMLSTReport.0.alleles.bglA"      : "bglA",
                    "SevenGeneMLSTReport.0.alleles.cat"       : "cat",
                    "SevenGeneMLSTReport.0.alleles.clpX"      : "clpX",
                    "SevenGeneMLSTReport.0.alleles.dapE"      : "dapE",
                    "SevenGeneMLSTReport.0.alleles.dat"       : "dat",
                    "SevenGeneMLSTReport.0.alleles.dnaG"      : "dnaG",
                    "SevenGeneMLSTReport.0.alleles.dnaN"      : "dnaN",
                    "SevenGeneMLSTReport.0.alleles.fadD"      : "fadD",
                    "SevenGeneMLSTReport.0.alleles.fumC"      : "fumC",
                    "SevenGeneMLSTReport.0.alleles.gyrB"      : "gyrB",
                    "SevenGeneMLSTReport.0.alleles.hemD"      : "hemD",
                    "SevenGeneMLSTReport.0.alleles.hisD"      : "hisD",
                    "SevenGeneMLSTReport.0.alleles.icd"       : "icd",
                    "SevenGeneMLSTReport.0.alleles.ldh"       : "ldh",
                    "SevenGeneMLSTReport.0.alleles.lhkA"      : "lhkA",
                    "SevenGeneMLSTReport.0.alleles.lysP"      : "lysP",
                    "SevenGeneMLSTReport.0.alleles.mdh"       : "mdh",
                    "SevenGeneMLSTReport.0.alleles.purA"      : "purA",
                    "SevenGeneMLSTReport.0.alleles.purE"      : "purE",
                    "SevenGeneMLSTReport.0.alleles.recA"      : "recA",
                    "SevenGeneMLSTReport.0.alleles.sucA"      : "sucA",
                    "SevenGeneMLSTReport.0.alleles.thrA"      : "thrA",
                    "SevenGeneMLSTReport.0.sequence_type"     : "7 Gene ST",
                    "SevenGeneMLSTReport.0.scheme"            : "7 Gene Scheme"
                ]
                ignore = [
                    "QUAST.0.Reference length",
                    "QUAST.0.Estimated reference length",
                    "QUAST.0.Reference GC (%)",
                    "QUAST.0.NG50",
                    "QUAST.0.NG90",
                    "QUAST.0.auNG",
                    "QUAST.0.LG50",
                    "QUAST.0.LG90",
                    "QUAST.0.Reference mapped (%)",
                    "QUAST.0.Reference properly paired (%)",
                    "QUAST.0.Reference avg. coverage depth",
                    "QUAST.0.Reference coverage >= 1x (%)",
                    "QUAST.0.# large blocks misassemblies",
                    "QUAST.0.# misassemblies",
                    "QUAST.0.# misassembled contigs",
                    "QUAST.0.Misassembled contigs length",
                    "QUAST.0.# local misassemblies",
                    "QUAST.0.# scaffold gap ext. mis.",
                    "QUAST.0.# scaffold gap loc. mis.",
                    "QUAST.0.# structural variations",
                    "QUAST.0.# possible TEs",
                    "QUAST.0.# unaligned mis. contigs",
                    "QUAST.0.# unaligned contigs",
                    "QUAST.0.Unaligned length",
                    "QUAST.0.Genome fraction (%)",
                    "QUAST.0.Duplication ratio",
                    "QUAST.0.Avg contig read support",
                    "QUAST.0.# mismatches per 100 kbp",
                    "QUAST.0.# indels per 100 kbp",
                    "QUAST.0.# genomic features",
                    "QUAST.0.# operons",
                    "QUAST.0.Complete BUSCO (%)",
                    "QUAST.0.Partial BUSCO (%)",
                    "QUAST.0.# predicted genes (unique)",
                    "QUAST.0.# predicted genes (>= 0 bp)",
                    "QUAST.0.# predicted genes (>= 300 bp)",
                    "QUAST.0.# predicted genes (>= 1500 bp)",
                    "QUAST.0.# predicted genes (>= 3000 bp)",
                    "QUAST.0.# predicted rRNA genes",
                    "QUAST.0.Largest alignment",
                    "QUAST.0.Total aligned length",
                    "QUAST.0.NA50",
                    "QUAST.0.NGA50",
                    "QUAST.0.NA90",
                    "QUAST.0.NGA90",
                    "QUAST.0.auNA",
                    "QUAST.0.auNGA",
                    "QUAST.0.LA50",
                    "QUAST.0.LGA50",
                    "QUAST.0.LA90",
                    "QUAST.0.LGA90",
                    "QUAST.0.K-mer-based compl. (%)",
                    "QUAST.0.K-mer-based cor. length (%)",
                    "QUAST.0.K-mer-based mis. length (%)",
                    "QUAST.0.# k-mer-based misjoins",
                    "FastP.command"
                ]
                json {
                    path = "**/SummaryReport/final_report_flattened.json"
                }
            }
        }
    }
}
