task_id	hash	process	tag	name	status	script	scratch	env	container	hostname	duration	realtime	%cpu	rss	vmem	rchar	wchar
3	c0/1a732d	MIKROKONDO:CLEAN_ASSEMBLE_READS:READ_SCAN	short	MIKROKONDO:CLEAN_ASSEMBLE_READS:READ_SCAN (short)	COMPLETED	
    fastq_scan.py -f 1_R1.fq.gz 1_R2.fq.gz -n R1 R2 -p false > short.json
    cat <<-END_VERSIONS > versions.yml
    "MIKROKONDO:CLEAN_ASSEMBLE_READS:READ_SCAN":
        python: $(python --version | sed 's/Python //g')
    END_VERSIONS
    	-	PYTHONNOUSERSITE=1
R_PROFILE_USER=/.Rprofile
R_ENVIRON_USER=/.Renviron
JULIA_DEPOT_PATH=/usr/local/share/julia
PATH=$PATH:/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/bin
	/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/work/singularity/docker.io-python-3.11.6.img	-	1.2s	683ms	71.1%	4.6 MB	13 MB	1.5 MB	1.8 KB
2	11/7a8058	MIKROKONDO:CLEAN_ASSEMBLE_READS:QC_READS:REMOVE_CONTAMINANTS	short	MIKROKONDO:CLEAN_ASSEMBLE_READS:QC_READS:REMOVE_CONTAMINANTS (short)	COMPLETED	
    minimap2 -x sr -a campy.mmi 1_R1.fq.gz 1_R2.fq.gz > short.sam
    samtools fastq -N -f12 short.sam -1 short.R1.deconned.fastq -2 short.R2.deconned.fastq -s short.singleton.fq
    gzip *.fastq
    gzip *.singleton.fq
    cat <<-END_VERSIONS > versions.yml
    "MIKROKONDO:CLEAN_ASSEMBLE_READS:QC_READS:REMOVE_CONTAMINANTS":
        minimap2: $(minimap2 --version 2>&1)
        samtools: $(echo $(samtools --version 2>&1) | sed 's/^.*samtools //; s/Using.*$//')
    END_VERSIONS
    	-	PYTHONNOUSERSITE=1
R_PROFILE_USER=/.Rprofile
R_ENVIRON_USER=/.Renviron
JULIA_DEPOT_PATH=/usr/local/share/julia
PATH=$PATH:/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/bin
	/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/work/singularity/depot.galaxyproject.org-singularity-mulled-v2-66534bcbb7031a148b13e2ad42583020b9cd25c4-1679e915ddb9d6b4abda91880c4b48857d471bd8-0.img	-	1.2s	1s	41.8%	1.7 MB	7.4 MB	6.7 MB	1 MB
1	5f/6e2ca4	MIKROKONDO:POST_ASSEMBLY:ANNOTATE_GENOMES:STARAMR_DUMP_DB_VERSIONS	StarAMR DB Versions	MIKROKONDO:POST_ASSEMBLY:ANNOTATE_GENOMES:STARAMR_DUMP_DB_VERSIONS (StarAMR DB Versions)	COMPLETED	
    staramr db info  > StarAMRDBVersions.txt
    cat <<-END_VERSIONS > versions.yml
    "MIKROKONDO:POST_ASSEMBLY:ANNOTATE_GENOMES:STARAMR_DUMP_DB_VERSIONS":
        staramr: $(echo $(staramr -V 2>&1) | sed 's/^.*staramr //; s/ .*$//')
    END_VERSIONS
    	-	PYTHONNOUSERSITE=1
R_PROFILE_USER=/.Rprofile
R_ENVIRON_USER=/.Renviron
JULIA_DEPOT_PATH=/usr/local/share/julia
PATH=$PATH:/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/bin
	/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/work/singularity/depot.galaxyproject.org-singularity-staramr%3A0.9.1--pyhdfd78af_0.img	-	6s	2s	207.5%	50.5 MB	4.3 GB	25 MB	2 KB
4	8c/b38c47	MIKROKONDO:CLEAN_ASSEMBLE_READS:QC_READS:FASTP_TRIM	short	MIKROKONDO:CLEAN_ASSEMBLE_READS:QC_READS:FASTP_TRIM (short)	COMPLETED	
    fastp -Q -i short.R1.deconned.fastq.gz -I short.R2.deconned.fastq.gz -o short.R1.trimmed.fastq.gz -O short.R2.trimmed.fastq.gz --json short.json --html short.html
    cat <<-END_VERSIONS > versions.yml
    "MIKROKONDO:CLEAN_ASSEMBLE_READS:QC_READS:FASTP_TRIM":
        fastp: $(fastp --version 2>&1 | sed -e "s/fastp //g")
    END_VERSIONS
    	-	PYTHONNOUSERSITE=1
R_PROFILE_USER=/.Rprofile
R_ENVIRON_USER=/.Renviron
JULIA_DEPOT_PATH=/usr/local/share/julia
PATH=$PATH:/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/bin
	/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/work/singularity/depot.galaxyproject.org-singularity-fastp%3A0.23.2--hb7a2d85_2.img	-	1.7s	2s	86.6%	736 MB	1.3 GB	173.1 KB	646 KB
5	d3/385d6e	MIKROKONDO:CLEAN_ASSEMBLE_READS:QC_READS:PARSE_FASTP	short	MIKROKONDO:CLEAN_ASSEMBLE_READS:QC_READS:PARSE_FASTP (short)	COMPLETED	-	-	PYTHONNOUSERSITE=1
R_PROFILE_USER=/.Rprofile
R_ENVIRON_USER=/.Renviron
JULIA_DEPOT_PATH=/usr/local/share/julia
PATH=$PATH:/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/bin
	-	-	19ms	1ms	-	-	-	-	-
6	9c/40827c	MIKROKONDO:CLEAN_ASSEMBLE_READS:QC_READS:MASH_ESTIMATE	short	MIKROKONDO:CLEAN_ASSEMBLE_READS:QC_READS:MASH_ESTIMATE (short)	COMPLETED	
    mash sketch -r -m 1 -k 21 -o short short.R1.trimmed.fastq.gz short.R2.trimmed.fastq.gz 2>&1 | sed -n 's/Estimated genome size: //gp' | xargs -I size printf "%.f" size > genome_size.txt
    cat <<-END_VERSIONS > versions.yml
    "MIKROKONDO:CLEAN_ASSEMBLE_READS:QC_READS:MASH_ESTIMATE":
        mash: $( mash --version )
    END_VERSIONS
    	-	PYTHONNOUSERSITE=1
R_PROFILE_USER=/.Rprofile
R_ENVIRON_USER=/.Renviron
JULIA_DEPOT_PATH=/usr/local/share/julia
PATH=$PATH:/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/bin
	/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/work/singularity/depot.galaxyproject.org-singularity-mash-2.3--he348c14_1.img	-	603ms	0ms	833.3%	3 MB	50.2 MB	140.3 KB	12.5 KB
7	19/c45c59	MIKROKONDO:CLEAN_ASSEMBLE_READS:QC_READS:MASH_SCREEN	short	MIKROKONDO:CLEAN_ASSEMBLE_READS:QC_READS:MASH_SCREEN (short)	COMPLETED	
    mash screen -w -p 1 campy-staph-ecoli.msh short.R1.trimmed.fastq.gz short.R2.trimmed.fastq.gz > short.reads.screen
    cat <<-END_VERSIONS > versions.yml
    "MIKROKONDO:CLEAN_ASSEMBLE_READS:QC_READS:MASH_SCREEN":
        mash: $( mash --version )
    END_VERSIONS
    	-	PYTHONNOUSERSITE=1
R_PROFILE_USER=/.Rprofile
R_ENVIRON_USER=/.Renviron
JULIA_DEPOT_PATH=/usr/local/share/julia
PATH=$PATH:/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/bin
	/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/work/singularity/depot.galaxyproject.org-singularity-mash-2.3--he348c14_1.img	-	523ms	0ms	929.8%	1.9 MB	47.7 MB	129 KB	770 B
8	9c/6ba1f3	MIKROKONDO:CLEAN_ASSEMBLE_READS:QC_READS:PARSE_MASH	short	MIKROKONDO:CLEAN_ASSEMBLE_READS:QC_READS:PARSE_MASH (short)	COMPLETED	
    mash_parse.py classify short.reads.screen

    # If no species identified, emit that from the pipeline
    #if [ $? -ne 0 ] && [ "classify" = "top" ]
    #then
    #    echo "No Species Identified"
    #fi
    cat <<-END_VERSIONS > versions.yml
    "MIKROKONDO:CLEAN_ASSEMBLE_READS:QC_READS:PARSE_MASH":
        python: $(python --version | sed 's/Python //g')
    END_VERSIONS
    	-	PYTHONNOUSERSITE=1
R_PROFILE_USER=/.Rprofile
R_ENVIRON_USER=/.Renviron
JULIA_DEPOT_PATH=/usr/local/share/julia
PATH=$PATH:/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/bin
	/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/work/singularity/docker.io-python-3.11.6.img	-	619ms	252ms	91.3%	7.6 MB	16.2 MB	1.1 MB	403 B
9	89/f607d2	MIKROKONDO:CLEAN_ASSEMBLE_READS:ASSEMBLE_READS:SEQTK_SIZE	short	MIKROKONDO:CLEAN_ASSEMBLE_READS:ASSEMBLE_READS:SEQTK_SIZE (short)	COMPLETED	
    seqtk size short.R1.trimmed.fastq.gz short.R2.trimmed.fastq.gz > short_basecounts.txt
    cat <<-END_VERSIONS > versions.yml
"MIKROKONDO:CLEAN_ASSEMBLE_READS:ASSEMBLE_READS:SEQTK_SIZE":
    seqtk: $(echo $(seqtk 2>&1) | sed 's/^.*Version: //; s/ .*$//')
END_VERSIONS
    	-	PYTHONNOUSERSITE=1
R_PROFILE_USER=/.Rprofile
R_ENVIRON_USER=/.Renviron
JULIA_DEPOT_PATH=/usr/local/share/julia
PATH=$PATH:/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/bin
	/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/work/singularity/depot.galaxyproject.org-singularity-seqtk%3A1.4--he4a0461_1.img	-	392ms	0ms	88.9%	1.6 MB	5.4 MB	101.5 KB	2.5 KB
10	e9/62ab61	MIKROKONDO:CLEAN_ASSEMBLE_READS:ASSEMBLE_READS:SPADES_ASSEMBLE	short	MIKROKONDO:CLEAN_ASSEMBLE_READS:ASSEMBLE_READS:SPADES_ASSEMBLE (short)	COMPLETED	
    spades.py  --isolate --threads 1 --memory 2 -1 short.R1.trimmed.fastq.gz -2 short.R2.trimmed.fastq.gz -o ./
    mv spades.log short.spades.log
    if [ -f scaffolds.fasta ]; then
        mv scaffolds.fasta short.scaffolds.fasta
        gzip -n short.scaffolds.fasta
    fi
    if [ -f contigs.fasta ]; then
        mv contigs.fasta short.contigs.fasta
        gzip -n short.contigs.fasta
    fi
    if [ -f transcripts.fasta ]; then
        mv transcripts.fasta short.transcripts.fasta
        gzip -n short.transcripts.fasta
    fi
    if [ -f assembly_graph_with_scaffolds.gfa ]; then
        mv assembly_graph_with_scaffolds.gfa short.assembly.gfa
        gzip -n short.assembly.gfa
    fi
    if [ -f gene_clusters.fasta ]; then
        mv gene_clusters.fasta short.gene_clusters.fasta
        gzip -n short.gene_clusters.fasta
    fi
    cat <<-END_VERSIONS > versions.yml
    "MIKROKONDO:CLEAN_ASSEMBLE_READS:ASSEMBLE_READS:SPADES_ASSEMBLE":
        spades: $(spades.py --version 2>&1 | sed 's/^.*SPAdes genome assembler v//; s/ .*$//')
    END_VERSIONS
    	-	PYTHONNOUSERSITE=1
R_PROFILE_USER=/.Rprofile
R_ENVIRON_USER=/.Renviron
JULIA_DEPOT_PATH=/usr/local/share/julia
PATH=$PATH:/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/bin
	/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/work/singularity/depot.galaxyproject.org-singularity-spades-3.15.5--h95f258a_1.img	-	9.3s	9s	35.7%	37.3 MB	822.6 MB	17 MB	4.7 MB
11	f2/7a8422	MIKROKONDO:CLEAN_ASSEMBLE_READS:ASSEMBLE_READS:MINIMAP2_INDEX	short	MIKROKONDO:CLEAN_ASSEMBLE_READS:ASSEMBLE_READS:MINIMAP2_INDEX (short)	COMPLETED	
    minimap2 -d short.idx short.contigs.fasta.gz
    cat <<-END_VERSIONS > versions.yml
    "MIKROKONDO:CLEAN_ASSEMBLE_READS:ASSEMBLE_READS:MINIMAP2_INDEX":
        minimap2: $(minimap2 --version 2>&1)
    END_VERSIONS
    	-	PYTHONNOUSERSITE=1
R_PROFILE_USER=/.Rprofile
R_ENVIRON_USER=/.Renviron
JULIA_DEPOT_PATH=/usr/local/share/julia
PATH=$PATH:/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/bin
	/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/work/singularity/depot.galaxyproject.org-singularity-mulled-v2-66534bcbb7031a148b13e2ad42583020b9cd25c4-1679e915ddb9d6b4abda91880c4b48857d471bd8-0.img	-	369ms	0ms	72.2%	1.6 MB	5.4 MB	78.4 KB	145.9 KB
13	41/15b0ad	MIKROKONDO:CLEAN_ASSEMBLE_READS:ASSEMBLE_READS:MINIMAP2_MAP	short	MIKROKONDO:CLEAN_ASSEMBLE_READS:ASSEMBLE_READS:MINIMAP2_MAP (short)	COMPLETED	
    minimap2 -x sr  short.idx short.R1.trimmed.fastq.gz short.R2.trimmed.fastq.gz > short.paf
    cat <<-END_VERSIONS > versions.yml
    "MIKROKONDO:CLEAN_ASSEMBLE_READS:ASSEMBLE_READS:MINIMAP2_MAP":
        minimap2: $(minimap2 --version 2>&1)
    END_VERSIONS
    	-	PYTHONNOUSERSITE=1
R_PROFILE_USER=/.Rprofile
R_ENVIRON_USER=/.Renviron
JULIA_DEPOT_PATH=/usr/local/share/julia
PATH=$PATH:/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/bin
	/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/work/singularity/depot.galaxyproject.org-singularity-mulled-v2-66534bcbb7031a148b13e2ad42583020b9cd25c4-1679e915ddb9d6b4abda91880c4b48857d471bd8-0.img	-	407ms	0ms	113.1%	4.1 MB	475 MB	265 KB	124.3 KB
14	e1/c15aaf	MIKROKONDO:CLEAN_ASSEMBLE_READS:ASSEMBLE_READS:RACON_POLISH	short	MIKROKONDO:CLEAN_ASSEMBLE_READS:ASSEMBLE_READS:RACON_POLISH (short)	COMPLETED	
    cat short.R1.trimmed.fastq.gz short.R2.trimmed.fastq.gz > input_racon_reads.fastq.gz
    racon -t 1  input_racon_reads.fastq.gz short.paf short.contigs.fasta.gz > short_assembly_consensus.fasta
    gzip short_assembly_consensus.fasta
    cat <<-END_VERSIONS > versions.yml
    "MIKROKONDO:CLEAN_ASSEMBLE_READS:ASSEMBLE_READS:RACON_POLISH":
        racon: $( racon --version 2>&1 | sed 's/^.*v//' )
    END_VERSIONS
    	-	PYTHONNOUSERSITE=1
R_PROFILE_USER=/.Rprofile
R_ENVIRON_USER=/.Renviron
JULIA_DEPOT_PATH=/usr/local/share/julia
PATH=$PATH:/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/bin
	/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/work/singularity/depot.galaxyproject.org-singularity-racon-1.4.20--h9a82719_1.img	-	1.5s	0ms	27.9%	1.6 MB	5.4 MB	307.3 KB	52.2 KB
12	e5/2325c5	MIKROKONDO:CLEAN_ASSEMBLE_READS:ASSEMBLE_READS:BANDAGE_IMAGE	short	MIKROKONDO:CLEAN_ASSEMBLE_READS:ASSEMBLE_READS:BANDAGE_IMAGE (short)	COMPLETED	
    gunzip -c short.assembly.gfa.gz > short.gfa
    Bandage image  short.gfa short.svg 
    rm short.gfa
    cat <<-END_VERSIONS > versions.yml
    "MIKROKONDO:CLEAN_ASSEMBLE_READS:ASSEMBLE_READS:BANDAGE_IMAGE":
        bandage: $(echo $(Bandage --version 2>&1) | sed 's/^.*Version: //; s/ .*$//')
    END_VERSIONS
    	-	PYTHONNOUSERSITE=1
R_PROFILE_USER=/.Rprofile
R_ENVIRON_USER=/.Renviron
JULIA_DEPOT_PATH=/usr/local/share/julia
PATH=$PATH:/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/bin
	/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/work/singularity/depot.galaxyproject.org-singularity-bandage-0.8.1--hc9558a2_2.img	-	3.8s	2.6s	11.8%	9.8 MB	106.3 MB	195.8 KB	13.5 KB
15	16/72e5a0	MIKROKONDO:CLEAN_ASSEMBLE_READS:POLISH_ASSEMBLIES:PILON_ITER	short	MIKROKONDO:CLEAN_ASSEMBLE_READS:POLISH_ASSEMBLIES:PILON_ITER (short)	COMPLETED	
    gzip -d -c short_assembly_consensus.fasta.gz > unzipped_contigs.fasta
    pilonpolisher -c unzipped_contigs.fasta -r short.R1.trimmed.fastq.gz short.R2.trimmed.fastq.gz -a 2 -p short -m 3
    # commands to get all put top entry in list to clean them up
    rm unzipped_contigs.fasta
    rm short_assembly_consensus.fasta.gz
    ls -lr *_?.fasta | tail -n+2 | rev | cut -d' ' -f 1 | rev | xargs rm
    ls -lr *_?.vcf | tail -n+2 | rev | cut -d' ' -f 1 | rev | xargs rm
    ls -lr *_?.changes | tail -n+2 | rev | cut -d' ' -f 1 | rev | xargs rm
    ls -lr *_?.bam | tail -n+2 | rev | cut -d' ' -f 1 | rev | xargs rm
    mv short_?.fasta short_polished.fasta
    gzip *.fasta
    cat <<-END_VERSIONS > versions.yml
    "MIKROKONDO:CLEAN_ASSEMBLE_READS:POLISH_ASSEMBLIES:PILON_ITER":
        pilonpolisher: No version statement listed
    END_VERSIONS
    	-	PYTHONNOUSERSITE=1
R_PROFILE_USER=/.Rprofile
R_ENVIRON_USER=/.Renviron
JULIA_DEPOT_PATH=/usr/local/share/julia
PATH=$PATH:/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/bin
	/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/work/singularity/docker.io-mwells14-pilonpolisher-0.0.1.img	-	10.4s	8.3s	115.7%	71.6 MB	4.9 GB	15.2 MB	5.5 MB
16	53/5473f2	MIKROKONDO:POST_ASSEMBLY:QC_ASSEMBLY:SEQKIT_STATS	short	MIKROKONDO:POST_ASSEMBLY:QC_ASSEMBLY:SEQKIT_STATS (short)	COMPLETED	
    seqkit stats -T short_polished.fasta.gz > short.tsv

    cat <<-END_VERSIONS > versions.yml
    "MIKROKONDO:POST_ASSEMBLY:QC_ASSEMBLY:SEQKIT_STATS":
        seqkit: $( seqkit version | sed 's/seqkit v//' )
    END_VERSIONS
    	-	PYTHONNOUSERSITE=1
R_PROFILE_USER=/.Rprofile
R_ENVIRON_USER=/.Renviron
JULIA_DEPOT_PATH=/usr/local/share/julia
PATH=$PATH:/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/bin
	/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/work/singularity/depot.galaxyproject.org-singularity-seqkit-2.2.0--h9ee0642_0.img	-	614ms	1s	110.6%	3.2 MB	704 MB	78.6 KB	503 B
20	f1/694981	MIKROKONDO:POST_ASSEMBLY:QC_ASSEMBLY:SEQKIT_FILTER	short	MIKROKONDO:POST_ASSEMBLY:QC_ASSEMBLY:SEQKIT_FILTER (short)	COMPLETED	
    seqkit seq -m 1000 short_polished.fasta.gz | gzip > short_filtered.fasta.gz
    cat <<-END_VERSIONS > versions.yml
    "MIKROKONDO:POST_ASSEMBLY:QC_ASSEMBLY:SEQKIT_FILTER":
        seqkit: $( seqkit version | sed 's/seqkit v//' )
    END_VERSIONS
    	-	PYTHONNOUSERSITE=1
R_PROFILE_USER=/.Rprofile
R_ENVIRON_USER=/.Renviron
JULIA_DEPOT_PATH=/usr/local/share/julia
PATH=$PATH:/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/bin
	/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/work/singularity/depot.galaxyproject.org-singularity-seqkit-2.2.0--h9ee0642_0.img	-	611ms	0ms	81.2%	4 MB	708.7 MB	87.3 KB	7.1 KB
17	6f/cdde96	MIKROKONDO:POST_ASSEMBLY:QC_ASSEMBLY:MLST	short	MIKROKONDO:POST_ASSEMBLY:QC_ASSEMBLY:MLST (short)	COMPLETED	
    mlst  --json short.json --label short --threads 1 short_polished.fasta.gz
    cat <<-END_VERSIONS > versions.yml
    "MIKROKONDO:POST_ASSEMBLY:QC_ASSEMBLY:MLST":
        mlst: $( echo $(mlst --version 2>&1) | sed 's/mlst //' )
    END_VERSIONS
    	-	PYTHONNOUSERSITE=1
R_PROFILE_USER=/.Rprofile
R_ENVIRON_USER=/.Renviron
JULIA_DEPOT_PATH=/usr/local/share/julia
PATH=$PATH:/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/bin
	/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/work/singularity/depot.galaxyproject.org-singularity-mlst-2.19.0--hdfd78af_1.img	-	2.2s	2s	50.2%	32.6 MB	149.4 MB	2.3 MB	6 KB
18	f4/1ae7cc	MIKROKONDO:POST_ASSEMBLY:QC_ASSEMBLY:CHECKM_LINEAGEWF	short	MIKROKONDO:POST_ASSEMBLY:QC_ASSEMBLY:CHECKM_LINEAGEWF (short)	COMPLETED	
    export MPLCONFIGDIR=/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo
    if [ "true" == "true" ]; then
        gzip -c -d short_polished.fasta.gz > short_polished.fasta
    fi
    mkdir bins
    mv *.fasta ./bins
    checkm lineage_wf ./bins/ short --tab_table --threads 1 \
        -x fasta \
        --pplacer_threads 1 \
        --alignment_file  short/short-genes.aln \
        --file short/short-results.txt \
        
    rm -rf ./bins
    cat <<-END_VERSIONS > versions.yml
    "MIKROKONDO:POST_ASSEMBLY:QC_ASSEMBLY:CHECKM_LINEAGEWF":
        checkm: $(echo $(checkm -h 2>&1) | sed 's/.*CheckM v//;s/ .*$//')
    END_VERSIONS
    	-	PYTHONNOUSERSITE=1
R_PROFILE_USER=/.Rprofile
R_ENVIRON_USER=/.Renviron
JULIA_DEPOT_PATH=/usr/local/share/julia
PATH=$PATH:/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/bin
	/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/work/singularity/depot.galaxyproject.org-singularity-checkm-genome%3A1.2.2--pyhdfd78af_1.img	-	7.3s	7s	110.1%	573.8 MB	17 GB	168.7 MB	15.8 MB
19	fe/dc556a	MIKROKONDO:POST_ASSEMBLY:QC_ASSEMBLY:QUAST	short	MIKROKONDO:POST_ASSEMBLY:QC_ASSEMBLY:QUAST (short)	COMPLETED	
    export MPLCONFIGDIR=$PWD
    export OPENBLAS_NUM_THREADS=1
    export OMP_NUM_THREADS=1
    export GOTO_NUM_THREADS=1
    quast --min-contig 1000 --report-all-metrics --pe1 short.R1.trimmed.fastq.gz --pe2 short.R2.trimmed.fastq.gz --threads 1 --output-dir short short_polished.fasta.gz
    for i in short/*report.*
    do
        mv $i ${i/report/short}
    done
    cat <<-END_VERSIONS > versions.yml
    "MIKROKONDO:POST_ASSEMBLY:QC_ASSEMBLY:QUAST":
        quast: $(quast.py --version 2>&1 | sed 's/^.*QUAST v//; s/ .*$//')
    END_VERSIONS
    	-	PYTHONNOUSERSITE=1
R_PROFILE_USER=/.Rprofile
R_ENVIRON_USER=/.Renviron
JULIA_DEPOT_PATH=/usr/local/share/julia
PATH=$PATH:/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/bin
	/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/work/singularity/depot.galaxyproject.org-singularity-quast%3A5.2.0--py39pl5321h4e691d4_3.img	-	7.5s	6.9s	75.7%	170.8 MB	2 GB	70.6 MB	5.6 MB
21	fb/9c20a7	MIKROKONDO:POST_ASSEMBLY:DETERMINE_SPECIES:MASH_SCREEN	short	MIKROKONDO:POST_ASSEMBLY:DETERMINE_SPECIES:MASH_SCREEN (short)	COMPLETED	
    mash screen -w -p 1 campy-staph-ecoli.msh short_polished.fasta.gz > short.taxa.screen
    cat <<-END_VERSIONS > versions.yml
    "MIKROKONDO:POST_ASSEMBLY:DETERMINE_SPECIES:MASH_SCREEN":
        mash: $( mash --version )
    END_VERSIONS
    	-	PYTHONNOUSERSITE=1
R_PROFILE_USER=/.Rprofile
R_ENVIRON_USER=/.Renviron
JULIA_DEPOT_PATH=/usr/local/share/julia
PATH=$PATH:/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/bin
	/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/work/singularity/depot.galaxyproject.org-singularity-mash-2.3--he348c14_1.img	-	527ms	0ms	1068.6%	3.4 MB	48 MB	87.4 KB	789 B
24	bf/dcbe89	MIKROKONDO:POST_ASSEMBLY:DETERMINE_SPECIES:PARSE_MASH	short	MIKROKONDO:POST_ASSEMBLY:DETERMINE_SPECIES:PARSE_MASH (short)	COMPLETED	
    mash_parse.py top short.taxa.screen

    # If no species identified, emit that from the pipeline
    #if [ $? -ne 0 ] && [ "top" = "top" ]
    #then
    #    echo "No Species Identified"
    #fi
    cat <<-END_VERSIONS > versions.yml
    "MIKROKONDO:POST_ASSEMBLY:DETERMINE_SPECIES:PARSE_MASH":
        python: $(python --version | sed 's/Python //g')
    END_VERSIONS
    	-	PYTHONNOUSERSITE=1
R_PROFILE_USER=/.Rprofile
R_ENVIRON_USER=/.Renviron
JULIA_DEPOT_PATH=/usr/local/share/julia
PATH=$PATH:/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/bin
	/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/work/singularity/docker.io-python-3.11.6.img	-	724ms	270ms	92.7%	6.2 MB	14.5 MB	1.1 MB	423 B
25	46/43a8f8	MIKROKONDO:POST_ASSEMBLY:ANNOTATE_GENOMES:IDENTIFY_POINTDB	short	MIKROKONDO:POST_ASSEMBLY:ANNOTATE_GENOMES:IDENTIFY_POINTDB (short)	COMPLETED	-	-	PYTHONNOUSERSITE=1
R_PROFILE_USER=/.Rprofile
R_ENVIRON_USER=/.Renviron
JULIA_DEPOT_PATH=/usr/local/share/julia
PATH=$PATH:/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/bin
	-	-	5ms	1ms	-	-	-	-	-
23	ad/fd601a	MIKROKONDO:POST_ASSEMBLY:ANNOTATE_GENOMES:ABRICATE	short	MIKROKONDO:POST_ASSEMBLY:ANNOTATE_GENOMES:ABRICATE (short)	COMPLETED	
    abricate short_polished.fasta.gz  --threads 1 > short.txt
    cat <<-END_VERSIONS > versions.yml
    "MIKROKONDO:POST_ASSEMBLY:ANNOTATE_GENOMES:ABRICATE":
        abricate: $(echo $(abricate --version 2>&1) | sed 's/^.*abricate //' )
    END_VERSIONS
    	-	PYTHONNOUSERSITE=1
R_PROFILE_USER=/.Rprofile
R_ENVIRON_USER=/.Renviron
JULIA_DEPOT_PATH=/usr/local/share/julia
PATH=$PATH:/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/bin
	/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/work/singularity/depot.galaxyproject.org-singularity-abricate%3A1.0.1--ha8f3691_1.img	-	2.7s	2s	39.1%	35.2 MB	155.8 MB	1.8 MB	6 KB
26	57/722421	MIKROKONDO:POST_ASSEMBLY:ANNOTATE_GENOMES:STARAMR	short	MIKROKONDO:POST_ASSEMBLY:ANNOTATE_GENOMES:STARAMR (short)	COMPLETED	
    export TMPDIR=$PWD # set env temp dir to in the folder
    if [ "true" == "true" ]; then
        gzip -c -d short_polished.fasta.gz > short_polished.fasta
    fi

    # Trim line endings to fit the blastDB, and keep contig headers unique, thank you to Dillon Barker for the awk!!
    awk '/>/ {print substr($0, 1, 49 - length(NR))"_" NR} $0!~">" {print $0}' short_polished.fasta > temp.fasta
    mv temp.fasta short_polished.fasta
    staramr search  -o short  short_polished.fasta
    cat <<-END_VERSIONS > versions.yml
    "MIKROKONDO:POST_ASSEMBLY:ANNOTATE_GENOMES:STARAMR":
        staramr: $(echo $(staramr -V 2>&1) | sed 's/^.*staramr //; s/ .*$//')
    END_VERSIONS
    	-	PYTHONNOUSERSITE=1
R_PROFILE_USER=/.Rprofile
R_ENVIRON_USER=/.Renviron
JULIA_DEPOT_PATH=/usr/local/share/julia
PATH=$PATH:/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/bin
	/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/work/singularity/depot.galaxyproject.org-singularity-staramr%3A0.9.1--pyhdfd78af_0.img	-	4.7s	5s	236.2%	134.3 MB	6.3 GB	32.7 MB	108.9 KB
22	5a/3930e9	MIKROKONDO:POST_ASSEMBLY:ANNOTATE_GENOMES:MOBSUITE_RECON	short	MIKROKONDO:POST_ASSEMBLY:ANNOTATE_GENOMES:MOBSUITE_RECON (short)	COMPLETED	
    if [ "true" == "true" ]; then
        gzip -c -d short_polished.fasta.gz > short_polished.fasta
    fi

    mob_recon --infile short_polished.fasta  --num_threads 1 --outdir results --sample_id short
    mv results short
    cat <<-END_VERSIONS > versions.yml
    "MIKROKONDO:POST_ASSEMBLY:ANNOTATE_GENOMES:MOBSUITE_RECON":
        mobsuite: $(echo $(mob_recon --version 2>&1) | sed 's/^.*mob_recon //; s/ .*$//')
    END_VERSIONS
    	-	PYTHONNOUSERSITE=1
R_PROFILE_USER=/.Rprofile
R_ENVIRON_USER=/.Renviron
JULIA_DEPOT_PATH=/usr/local/share/julia
PATH=$PATH:/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/bin
	/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/work/singularity/depot.galaxyproject.org-singularity-mob_suite%3A3.0.3--pyhdfd78af_0.img	-	27.8s	27s	100.5%	327.5 MB	4.6 GB	79.2 MB	60.4 KB
27	54/62aa2c	MIKROKONDO:REPORT	Report Generation	MIKROKONDO:REPORT (Report Generation)	COMPLETED	-	-	PYTHONNOUSERSITE=1
R_PROFILE_USER=/.Rprofile
R_ENVIRON_USER=/.Renviron
JULIA_DEPOT_PATH=/usr/local/share/julia
PATH=$PATH:/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/bin
	-	-	104ms	41ms	-	-	-	-	-
28	66/81259a	MIKROKONDO:REPORT_AGGREGATE	Creating alternate output formats	MIKROKONDO:REPORT_AGGREGATE (Creating alternate output formats)	COMPLETED	
    report_summaries.py -f final_report.json -o final_report.tsv -s _flat_sample.json
    cat <<-END_VERSIONS > versions.yml
    "MIKROKONDO:REPORT_AGGREGATE":
        python: $(python --version | sed 's/Python //g')
    END_VERSIONS
    	-	PYTHONNOUSERSITE=1
R_PROFILE_USER=/.Rprofile
R_ENVIRON_USER=/.Renviron
JULIA_DEPOT_PATH=/usr/local/share/julia
PATH=$PATH:/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/bin
	/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/work/singularity/docker.io-python-3.11.6.img	-	994ms	519ms	93.6%	6.1 MB	14.5 MB	1.3 MB	42.1 KB
29	d1/aa8893	MIKROKONDO:GZIP_FILES	short	MIKROKONDO:GZIP_FILES (short)	COMPLETED	
    gzip -c short_flat_sample.json > short_flat_sample.json.gz
    cat <<-END_VERSIONS > versions.yml
    "MIKROKONDO:GZIP_FILES":
        gzip: $(echo $(touch --version 2>&1) | sed 's/^.*coreutils) //; s/ .*$//')
    END_VERSIONS
    	-	PYTHONNOUSERSITE=1
R_PROFILE_USER=/.Rprofile
R_ENVIRON_USER=/.Renviron
JULIA_DEPOT_PATH=/usr/local/share/julia
PATH=$PATH:/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/bin
	/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/work/singularity/depot.galaxyproject.org-singularity-coreutils%3A8.31--h14c3975_0.img	-	501ms	26ms	75.6%	1 MB	11 MB	71.7 KB	3.4 KB
30	bc/5cf2f8	MIKROKONDO:CUSTOM_DUMPSOFTWAREVERSIONS	-	MIKROKONDO:CUSTOM_DUMPSOFTWAREVERSIONS (1)	COMPLETED	def args = task.ext.args ?: ''
template 'dumpsoftwareversions.py'
	-	PYTHONNOUSERSITE=1
R_PROFILE_USER=/.Rprofile
R_ENVIRON_USER=/.Renviron
JULIA_DEPOT_PATH=/usr/local/share/julia
PATH=$PATH:/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/bin
	/Drives/W/Projects/Project_Matthew_Wells/GSP/MikroKondo/mikrokondo/work/singularity/depot.galaxyproject.org-singularity-multiqc-1.13--pyhdfd78af_0.img	-	707ms	263ms	53.1%	2.6 MB	12 MB	866 KB	5.5 KB
